function setup(){createCanvas(window.innerWidth,window.innerHeight),smooth(),frameRate(25),noStroke(),smooth(),textAlign(CENTER,CENTER),textSize(txtSize),textFont("Monospace",txtSize),cursor("assets/cursor_dot.png",3,3),orange=color(255,89,0,255),yellow=color(255,189,0,255),white=color(255,255,255),root=new SingleQuad(0,0,width,height,null),mouseBox=new Boxed(width/2,height/2),mouseBox.setSize(1);for(var e=0;20>e;e++){var o=new Boxed(random(width),random(height));boxes[boxes.length]=o}loadAsset("facebook","http://www.facebook.com/m1530","assets/simple/facebook/facebook-48.png"),loadAsset("tsu","http://www.tsu.co/stopyransky","assets/simple/tsu/tsu-48.png"),loadAsset("twitter","http://www.twitter.com/stopyransky","assets/simple/twitter/twitter-48.png"),loadAsset("pinterest","https://pl.pinterest.com/carlosstopyrans/","assets/simple/pinterest/pinterest-48.png"),loadAsset("instagram","http://instagram.com/stopyransky","assets/simple/instagram/instagram-48.png"),loadAsset("soundcloud","https://soundcloud.com/stopyransky","assets/simple/soundcloud/soundcloud-48.png")}function loadAsset(e,o,t){var s=new Boxed(random(width),random(height),24);s.setName(e),s.setLink(o);var a=loadImage(t);s.setValue(a),boxes[boxes.length]=s}function reset(){root.clear(),mouseoverboxed=null;for(var e=0;e<removals.length;e++){var o=removals[e],t=boxes.indexOf(o);boxes.splice(t,1)}removals=[];var s=boxes.concat(addons);addons=[],boxes=s;for(var e=0;e<boxes.length;e++){if(boxes.length<20){var o=new Boxed(random(width),random(height),random(minsize,maxsize));o.applyForce(new Vect2d(random(-1,1),random(-1,1))),boxes[boxes.length]=o}root.add(boxes[e])||(removals[removals.length]=boxes[e])}}function update(){reset(),root.traverse(applyBehaviors),root.traverse(updateMotion)}function draw(){update(),background(255),noStroke(),root.display(),noFill(),root.traverse(displayHoverQuads),root.traverse(displayContent);var e="";if(null!==mouseoverboxed?""===mouseoverboxed.name?mouseDragging||(e="drag to aim"):e="click to visit "+mouseoverboxed.name:null!==active&&""===active.name?e=" release to shoot":null===active&&(e="click to create new pix"),fill(orange),text(e,.5*width,height-12),mouseDragging&&null!==active&&active.isMutable()){stroke(255,89,0,155);var o=new Vect2d(active.x(),active.y()).sub(new Vect2d(mouseX,mouseY));line(active.x(),active.y(),active.x()+o.x,active.y()+o.y),stroke(255),line(active.x(),active.y(),mouseX,mouseY),strokeWeight(5),point(active.x(),active.y()),point(mouseX,mouseY),strokeWeight(1),noStroke()}}function mouseMoved(){mouseBox.setCenter(mouseX,mouseY)}function mousePressed(){if(root.traverse(passMousePress),null===active){var e=new Boxed(mouseX+random(-1,1),mouseY+random(-1,1),random(8,20));boxes[boxes.length]=e,active=e}}function mouseReleased(){root.traverse(passMouseRelease),mouseDragging=!1}function mouseDragged(){mouseMoved(),null!==active&&active.isMutable()&&active.setDragged(!0),mouseDragging=!0}function mouseEntered(){mouseMoved()}function mouseExited(){mouseMoved()}function mouseWheel(e){var o=e.detail?-120*e.detail:e.wheelDelta,t=o>0?1:0>o?-1:0;if(null!==active){var s=active.getSize()+t;active.setSize(s)}}function windowResized(){resizeCanvas(window.innerWidth,window.innerHeight),root.resizeQuad(window.innerWidth-1,window.innerHeight-1),root.clear();for(var e=0;e<boxes.length;e++)root.add(boxes[e])}var root,boxes=[],addons=[],removals=[],maxspeed=20,maxforce=.95,minsize=6,maxsize=22,mouseBox,active=null,mouseDragging=!1,mouseoverboxed=null,power=0,showLegend=!0,orange,yellow,white,txtSize=10,passMousePress=function(e){var o=e.getValue();null!==o&&o.isMouseOver()&&(o.setPressed(!0),active=o)},passMouseRelease=function(e){var o=e.getValue();if(null!==o){if(o.isPressed()&&(mouseDragging||""===o.link||window.open(o.link,"_blank"),o.setPressed(!1)),o.isDragged()&&(o.setDragged(!1),o.isMutable)){var t=Vect2d.prototype.subtract(new Vect2d(o.x(),o.y()),new Vect2d(mouseX,mouseY));o.applyForce(t)}active=null}},displayHoverQuads=function(e){e.intersectsBoxed(mouseBox)&&(fill(0,20),rect(e.x1(),e.y1(),e.width(),e.height()))},displayContent=function(e){null!==e.getValue()&&e.getValue().display()},updateMotion=function(e){null!==e.getValue()&&e.getValue().update()},applyBehaviors=function(e){var o=e.getValue();null!==o&&(o.isMutable()||o.stayWithin(root),o.separate(root.getObjectsUnder(o)))};